# å°çŸ¥(Xiaozhi)æ™ºèƒ½è¯­éŸ³åŠ©æ‰‹å®¢æˆ·ç«¯

[![Goç‰ˆæœ¬](https://img.shields.io/badge/Go-1.20+-00ADD8?style=flat&logo=go)](https://golang.org/)
[![è®¸å¯è¯](https://img.shields.io/badge/è®¸å¯è¯-MIT-green)](LICENSE)

å°çŸ¥(Xiaozhi)æ˜¯ä¸€ä¸ªåŸºäºWebSocketåè®®çš„æ™ºèƒ½è¯­éŸ³åŠ©æ‰‹å®¢æˆ·ç«¯ï¼Œæ”¯æŒå®æ—¶è¯­éŸ³è¯†åˆ«ã€å¯¹è¯å’Œç‰©è”ç½‘æ§åˆ¶åŠŸèƒ½ã€‚

## åŠŸèƒ½ç‰¹ç‚¹

- ğŸ’¬ **å®æ—¶è¯­éŸ³äº¤äº’**ï¼šæ”¯æŒOpuséŸ³é¢‘ç¼–è§£ç ï¼Œå®ç°ä½å»¶è¿Ÿçš„è¯­éŸ³æ²Ÿé€š
- ğŸ”Š **è¯­éŸ³è¯†åˆ«å’Œåˆæˆ**ï¼šé›†æˆè¯­éŸ³è½¬æ–‡æœ¬(STT)å’Œæ–‡æœ¬è½¬è¯­éŸ³(TTS)åŠŸèƒ½
- ğŸ  **IoTè®¾å¤‡æ§åˆ¶**ï¼šæ”¯æŒé€šè¿‡è¯­éŸ³æŒ‡ä»¤æ§åˆ¶ç‰©è”ç½‘è®¾å¤‡
- ğŸŒ **WebSocketåè®®**ï¼šåŸºäºæ ‡å‡†WebSocketå®ç°ç¨³å®šå¯é çš„é€šä¿¡
- ğŸ”„ **è‡ªåŠ¨é‡è¿æœºåˆ¶**ï¼šç½‘ç»œå¼‚å¸¸æ—¶è‡ªåŠ¨é‡æ–°è¿æ¥åˆ°æœåŠ¡å™¨
- ğŸ”’ **å®‰å…¨è®¤è¯**ï¼šæ”¯æŒä»¤ç‰Œè®¤è¯ï¼Œç¡®ä¿é€šä¿¡å®‰å…¨

## å¿«é€Ÿå¼€å§‹

### å‰ç½®æ¡ä»¶

- Go 1.20+
- æ”¯æŒPortAudioçš„ç³»ç»Ÿç¯å¢ƒ
- æœ‰æ•ˆçš„æœåŠ¡ç«¯æ¥å£å’Œè®¤è¯ä»¤ç‰Œ

### å®‰è£…

1. å…‹éš†ä»£ç åº“ï¼š

```bash
git clone https://github.com/JustaCai/xiaozhi-go.git
cd xiaozhi-go
```

2. å®‰è£…ä¾èµ–ï¼š

```bash
make deps
```

3. ç¼–è¯‘é¡¹ç›®ï¼š

```bash
make build
```

### ä½¿ç”¨æ–¹æ³•

**åŸºæœ¬è¿è¡Œ**ï¼š

```bash
./xiaozhi-client -server wss://your-server.com -token your-token
```

**ä½¿ç”¨Makefileè¿è¡Œ**ï¼š

```bash
make run SERVER_URL=wss://your-server.com TOKEN=your-token
```

**ä»…æ‰§è¡Œæ¿€æ´»æµç¨‹**ï¼š

```bash
make activate SERVER_URL=wss://your-server.com TOKEN=your-token
```

### å‘½ä»¤è¡Œå‚æ•°

| å‚æ•° | æè¿° | é»˜è®¤å€¼ |
|------|------|--------|
| `-server` | WebSocketæœåŠ¡å™¨åœ°å€ | wss://api.tenclass.net/xiaozhi/v1/ |
| `-token` | APIè®¿é—®ä»¤ç‰Œ | - |
| `-version` | å®¢æˆ·ç«¯ç‰ˆæœ¬å· | 1.0.0 |
| `-board` | è®¾å¤‡æ¿å‹å· | generic |
| `-activate-only` | ä»…æ‰§è¡Œæ¿€æ´»æµç¨‹ | false |


## é¡¹ç›®ç»“æ„

```
xiaozhi-go/
â”œâ”€â”€ cmd/                   # å‘½ä»¤è¡Œåº”ç”¨
â”‚   â”œâ”€â”€ client/           # ä¸»å®¢æˆ·ç«¯åº”ç”¨
â”‚   â””â”€â”€ audio_demos/      # éŸ³é¢‘ç›¸å…³ç¤ºä¾‹
â”œâ”€â”€ internal/              # å†…éƒ¨åŒ…
â”‚   â”œâ”€â”€ audio/            # éŸ³é¢‘å¤„ç†
â”‚   â”œâ”€â”€ protocol/         # é€šä¿¡åè®®å®ç°
â”‚   â”œâ”€â”€ iot/              # ç‰©è”ç½‘åŠŸèƒ½
â”‚   â”œâ”€â”€ client/           # å®¢æˆ·ç«¯æ ¸å¿ƒé€»è¾‘
â”‚   â””â”€â”€ ota/              # åœ¨çº¿æ›´æ–°åŠŸèƒ½
â”œâ”€â”€ doc/                   # æ–‡æ¡£
â”‚   â””â”€â”€ websocket.md      # WebSocketåè®®æ–‡æ¡£
â”œâ”€â”€ Makefile               # é¡¹ç›®æ„å»ºè„šæœ¬
â””â”€â”€ go.mod                 # Goæ¨¡å—å®šä¹‰
```

## åè®®æ–‡æ¡£

æœ‰å…³WebSocketé€šä¿¡åè®®çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…[WebSocketåè®®æ–‡æ¡£](doc/websocket.md)ã€‚

## å¼€å‘

### ç¼–è¯‘ä¸æµ‹è¯•

```bash
# ç¼–è¯‘é¡¹ç›®
make build

# è¿è¡Œæµ‹è¯•
make test

# æ¸…ç†ç¼–è¯‘äº§ç‰©
make clean
```

### ç¯å¢ƒå˜é‡

æ‚¨ä¹Ÿå¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®å®¢æˆ·ç«¯ï¼š

- `VERSION` - å®¢æˆ·ç«¯ç‰ˆæœ¬å·
- `BOARD_TYPE` - è®¾å¤‡æ¿å‹å·
- `SERVER_URL` - WebSocketæœåŠ¡å™¨åœ°å€
- `TOKEN` - APIè®¿é—®ä»¤ç‰Œ
- `ACTIVATE_ONLY` - æ˜¯å¦ä»…æ‰§è¡Œæ¿€æ´»æµç¨‹

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ï¼Œè¯¦æƒ…è¯·å‚é˜…[LICENSE](LICENSE)æ–‡ä»¶ã€‚

## è´¡çŒ®

æ¬¢è¿æäº¤é—®é¢˜å’Œè´¡çŒ®ä»£ç ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Forkæœ¬ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. æ‰“å¼€Pull Request
